---
title: "27_29_SOK1016_M2_V23"
author: "27 & 29"
format: pdf
editor: visual
echo: false
---

```{r}


library(tidyverse)
library(httr)
library(PxWebApiData)
library(rjstat)
library(ggplot2)
library(base)
library(openxlsx)
library(lubridate)
```

## OPPGAVE 1

$$ğ‘¦âˆ’ğ‘¦ğ‘› =ğ‘§âˆ’ğ›¼(ğ‘–âˆ’ğœ‹ğ‘’)Â $$

$$ğ‘–=ğœ™ğ‘¦(ğ‘¦âˆ’ğ‘¦ğ‘›)+ğœ™ğœ‹(ğœ‹âˆ’ğœ‹âˆ—)Â $$

$$ ğœ‹=ğœ‹ğ‘’+ğ›½(ğ‘¦âˆ’ğ‘¦ğ‘›)Â $$

Modellen beskriver sammenhengen mellom produksjon, nominell rente og prisvekst i Ã¸konomien.Â 

Ligning (1) viser hvordan produksjonsgapet, definert som differansen mellom faktisk produksjon ğ‘¦ og det naturlige nivÃ¥et pÃ¥ produksjon $ğ‘¦ğ‘›$, pÃ¥virker den nominelle renten $ğ‘–$. Parameteren $ğ›¼$ representerer sentralbankens respons pÃ¥ produksjonsgapet. Hvis produksjonsgapet er positivt, det vil si at faktisk produksjon er hÃ¸yere enn det naturlige nivÃ¥et, vil sentralbanken Ã¸ke den nominelle renten for Ã¥ dempe Ã¸konomisk aktivitet og dempe inflasjonen. Omvendt, hvis produksjonsgapet er negativt, vil sentralbanken senke renten for Ã¥ stimulere Ã¸konomisk aktivitet og Ã¸ke inflasjonen.Â 

Ligning (2) beskriver hvordan den nominelle renten $ğ‘–$ pÃ¥virker produksjonen $ğ‘¦$ og prisveksten $ğœ‹$. Parameteren $ğœ™ğ‘¦$ representerer fÃ¸lsomheten til produksjonen for endringer i den nominelle renten, mens parameteren $ğœ™ğœ‹$ representerer fÃ¸lsomheten til prisveksten for endringer i den nominelle renten. Hvis den nominelle renten Ã¸ker, vil produksjonen falle (fordi det blir dyrere Ã¥ lÃ¥ne penger) og prisveksten vil reduseres (fordi Ã¸kt rente reduserer etterspÃ¸rselen og bidrar til Ã¥ redusere inflasjonen). Omvendt, hvis den nominelle renten faller, vil produksjonen og prisveksten stiger.Â 

Ligning (3) beskriver hvordan produksjonsgapet pÃ¥virker prisveksten. Parameteren $ğ›½$ representerer fÃ¸lsomheten til prisveksten for endringer i produksjonsgapet. Hvis produksjonsgapet er positivt, vil prisveksten Ã¸ke (fordi Ã¸kt etterspÃ¸rsel fÃ¸rer til hÃ¸yere priser). Omvendt, hvis produksjonsgapet er negativt, vil prisveksten reduseres (fordi det er mindre etterspÃ¸rsel og lavere priser).Â 

### 1a)

For Ã¥ forstÃ¥ hva som bestemmer verdien pÃ¥ parameteren $ğ›¼$, kan det vÃ¦re nyttig Ã¥ se pÃ¥ en mer detaljert modell som beskriver hvordan sentralbanken setter renten.Â 

En vanlig modell for Ã¥ beskrive sentralbankens rentesetting er en sÃ¥kalt taylor-regelen. I denne modellen er den nominelle renten avhengig av inflasjonsgapet og produksjonsgapet, og kan uttrykkes som:Â 

$$ğ‘– = ğ‘–* + ğœ‹ + ğ›¼(ğ‘¦ âˆ’ ğ‘¦n)$$Â 

Her er $ğ‘–*$ en nÃ¸ytral rente som representerer det nivÃ¥et renten ville vÃ¦rt pÃ¥ i fravÃ¦r av inflasjon og produksjonsgap. $ğœ‹$ er inflasjonen, $ğ‘¦$ er faktisk produksjon, og $ğ‘¦n$ er den potensielle produksjonen, det vil si produksjonsnivÃ¥et som ville vÃ¦rt oppnÃ¥dd hvis Ã¸konomien var i likevekt uten produksjonsgap.Â 

### 1b)

NÃ¥r inflasjonsforventningene Ã¸ker, kan sentralbanken Ã¸ke rentene for Ã¥ redusere inflasjonen. Dette kan fÃ¸re til at det blir dyrere Ã¥ ta opp lÃ¥n, noe som kan redusere etterspÃ¸rselen etter varer og tjenester. Hvis etterspÃ¸rselen reduseres, vil produksjonen ogsÃ¥ reduseres (Î”ğ‘¦ \< 0). Prisveksten vil ogsÃ¥ reduseres som et resultat av lavere etterspÃ¸rsel (Î”ğœ‹ \< 0).Â 

Hvor mye produksjonen vil reduseres som fÃ¸lge av en Ã¸kning i rentene, avhenger av hvor fÃ¸lsomt bedriftene er for endringer i rentenivÃ¥et. Hvis bedriftene er svÃ¦rt fÃ¸lsomme for endringer i rentenivÃ¥et, vil en Ã¸kning i rentene fÃ¸re til en betydelig reduksjon i etterspÃ¸rselen og dermed en betydelig reduksjon i produksjonen. I dette tilfellet vil produksjonen falle nÃ¥r inflasjonsforventningene Ã¸ker og rentene Ã¸ker.Â 

PÃ¥ den annen side, hvis bedriftene er mindre fÃ¸lsomme for endringer i rentenivÃ¥et, vil en Ã¸kning i rentene ha mindre effekt pÃ¥ etterspÃ¸rselen og produksjonen. I dette tilfellet vil produksjonen forbli relativt stabil nÃ¥r inflasjonsforventningene Ã¸ker og rentene Ã¸ker.Â 

Den Ã¸konomiske intuisjonen bak denne restriksjonen er at nÃ¥r bedriftene er svÃ¦rt fÃ¸lsomme for endringer i rentenivÃ¥et, vil Ã¸kt inflasjon fÃ¸re til hÃ¸yere renter, noe som igjen vil redusere etterspÃ¸rselen og produksjonen.

## 
OPPGAVE 2

ğœ‹ğ‘¡ = ğœ‹ğ‘¡âˆ’1 + ğ›½(ğ‘¦ğ‘¡ âˆ’ ğ‘¦ğ‘›)Â 

= ğœ‹ğ‘¡âˆ’2 + ğ›½(ğ‘¦ğ‘¡âˆ’1 âˆ’ ğ‘¦ğ‘›) + ğ›½(ğ‘¦ğ‘¡ âˆ’ ğ‘¦ğ‘›)Â 

= ğœ‹ğ‘¡âˆ’3 + ğ›½(ğ‘¦ğ‘¡âˆ’2 âˆ’ ğ‘¦ğ‘›) + ğ›½(ğ‘¦ğ‘¡âˆ’1 âˆ’ ğ‘¦ğ‘›) + ğ›½(ğ‘¦ğ‘¡ âˆ’ ğ‘¦ğ‘›)Â = ğœ‹0 + âˆ‘ğ‘ =1ğ‘¡ ğ›½(ğ‘¦ğ‘  âˆ’ ğ‘¦ğ‘›)Â 

SÃ¥ for alle ğœ \> 0, kan vi skriveÂ Â 

ğœ‹ğœ = ğœ‹0 + âˆ‘ğ‘ =1ğœ ğ›½(ğ‘¦ğ‘  âˆ’ ğ‘¦ğ‘›)Â 

Vi kan starte med Ã¥ bruke ligning (3\*) og sette inn ğœ‹ğ‘¡ğ‘’ = ğœ‹ğ‘¡âˆ’1, og deretter bruke denne ligningen rekursivt for Ã¥ fÃ¥ ğœ‹ğ‘¡ uttrykt som en sum av produksjonsgapet fra periode 0 til ğ‘¡ multiplisert med ğ›½. Jo stÃ¸rre produksjonsgapet er og jo hÃ¸yere ğ›½ er, desto stÃ¸rre blir forventet prisvekst i periode ğ‘¡. Hvis en ekspansiv Ã¸konomisk politikk prÃ¸ver Ã¥ opprettholde et positivt produksjonsgap over tid, vil dette fÃ¸re til Ã¸kt sum av produksjonsgapet og dermed Ã¸kende forventet prisvekst. Dette kan igjen fÃ¸re til Ã¸kt inflasjon, og hvis sentralbanken ikke reagerer pÃ¥ dette, kan det fÃ¸re til en inflasjonsspiral og en Ã¸konomisk krise. Dette kalles hyperinflasjon og er da ikke en rimelig antakelse over lengre tid.Â 

Â 

Adaptive forventninger antar at Ã¸konomiske aktÃ¸rer tilpasser sine forventninger basert pÃ¥ tidligere observasjoner av prisvekst og andre Ã¸konomiske variabler. PÃ¥ kort sikt kan adaptive forventninger vÃ¦re en rimelig antagelse i situasjoner med vedvarende Ã¸kning i prisvekst. Men pÃ¥ lang sikt kan Ã¸konomiske aktÃ¸rer lÃ¦re av erfaringene sine og justere forventningene sine mer systematisk. Sentralbanken kan ogsÃ¥ endre sin politikk for Ã¥ dempe inflasjonen, noe som kan pÃ¥virke Ã¸konomiske aktÃ¸rers forventninger og atferd.Â 

## OPPGAVE 3

```{r}
# Manuell data pÃ¥ husholdninger og nÃ¦ringslivsledere
husholdningene <- c(1.9, 1.8, 1.8, 2.0, 1.6, 1.9, 1.9, 2.3,
                    2.0, 2.0, 1.8, 2.0, 2.0, 2.1, 2.4, 1.9,
                    2.1, 2.2, 2.0, 2.1, 1.8, 2.5, 2.1, 1.9,
                    1.8, 2.2, 2.3, 3.0, 3.2, 4.3, 3.6, 4.1)

naeringslivsledere <- c(2.4, 2.1, 2.2, 2.3, 2.4, 2.3, 2.6,
                        2.6, 2.8, 2.4, 2.3, 2.5, 2.2, 2.3,
                        2.4, 2.5, 2.6, 2.6, 2.5, 2.5, 2.4,
                        2.5, 2.6, 2.4, 2.9, 3.2, 3.6, 3.9,
                        4.7, 5.4, 5.6, 6.4)


# Lager datasett av begge
df <- data.frame(husholdningene, naeringslivsledere)

# Lager linjeplot 
ggplot(df, aes(x=seq_along(husholdningene))) +
  geom_line(aes(y=husholdningene, color="Husholdninger")) +
  geom_line(aes(y=naeringslivsledere, color="NÃ¦ringslivsledere")) +
  labs(title="Predikert prisvekst", subtitle = "Kilde 2", x="Ã…r", y="Prosent", color="") +
  scale_color_manual(values=c("blue", "red")) +
  scale_x_continuous(limits=c(1,length(husholdningene)),
                     breaks=seq(1, length(husholdningene), by=4),
                     labels=c(2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022)) +
  theme_minimal()
```

```{r}
#Henter inn data via json spÃ¸rring
url <- "https://data.ssb.no/api/v0/no/table/03013/"

query <- '{
  "query": [
    {
      "code": "Konsumgrp",
      "selection": {
        "filter": "vs:CoiCop2016niva1",
        "values": [
          "TOTAL"
        ]
      }
    },
    {
      "code": "ContentsCode",
      "selection": {
        "filter": "item",
        "values": [
          "Tolvmanedersendring"
        ]
      }
    },
    {
      "code": "Tid",
      "selection": {
        "filter": "item",
        "values": [
          "2016M01",
          "2016M02",
          "2016M03",
          "2016M04",
          "2016M05",
          "2016M06",
          "2016M07",
          "2016M08",
          "2016M09",
          "2016M10",
          "2016M11",
          "2016M12",
          "2017M01",
          "2017M02",
          "2017M03",
          "2017M04",
          "2017M05",
          "2017M06",
          "2017M07",
          "2017M08",
          "2017M09",
          "2017M10",
          "2017M11",
          "2017M12",
          "2018M01",
          "2018M02",
          "2018M03",
          "2018M04",
          "2018M05",
          "2018M06",
          "2018M07",
          "2018M08",
          "2018M09",
          "2018M10",
          "2018M11",
          "2018M12",
          "2019M01",
          "2019M02",
          "2019M03",
          "2019M04",
          "2019M05",
          "2019M06",
          "2019M07",
          "2019M08",
          "2019M09",
          "2019M10",
          "2019M11",
          "2019M12",
          "2020M01",
          "2020M02",
          "2020M03",
          "2020M04",
          "2020M05",
          "2020M06",
          "2020M07",
          "2020M08",
          "2020M09",
          "2020M10",
          "2020M11",
          "2020M12",
          "2021M01",
          "2021M02",
          "2021M03",
          "2021M04",
          "2021M05",
          "2021M06",
          "2021M07",
          "2021M08",
          "2021M09",
          "2021M10",
          "2021M11",
          "2021M12",
          "2022M01",
          "2022M02",
          "2022M03",
          "2022M04",
          "2022M05",
          "2022M06",
          "2022M07",
          "2022M08",
          "2022M09",
          "2022M10",
          "2022M11",
          "2022M12"
        ]
      }
    }
  ],
  "response": {
    "format": "json-stat2"
  }
}'
  
hent_indeks.tmp <- url %>%
  POST(body = query, encode = "json")

df_kpi <-  hent_indeks.tmp %>%
  content("text") %>%
  fromJSONstat() %>%
  as_tibble()


```

```{r}
df_kpi %>% 
  mutate(year = year(as.Date(paste0(mÃ¥ned, "-01"), format = "%YM%m-%d"))) %>%
  group_by(year) %>%
  summarise(avg_cpi = mean(`value`)) %>%
  ggplot(aes(x = year, y = avg_cpi)) +
  geom_line() +
  labs(title="Konsumprisindeks", subtitle = "Kilde 1", x="Ã…r", y="", color="")
  
```

```{r}
url_konsum <- "https://data.ssb.no/api/v0/no/table/09172/"

query <- '{
  "query": [
    {
      "code": "UtgifterHushold",
      "selection": {
        "filter": "vs:NRKonsumHusAgg",
        "values": [
          "nr61_"
        ]
      }
    },
    {
      "code": "ContentsCode",
      "selection": {
        "filter": "item",
        "values": [
          "FastePriser"
        ]
      }
    },
    {
      "code": "Tid",
      "selection": {
        "filter": "item",
        "values": [
          "2015",
          "2016",
          "2017",
          "2018",
          "2019",
          "2020",
          "2021",
          "2022"
        ]
      }
    }
  ],
  "response": {
    "format": "json-stat2"
  }
}'

hent_indeks.tmp_konsum <- url_konsum %>%
  POST(body = query, encode = "json")

df_konsum <-  hent_indeks.tmp_konsum %>%
  content("text") %>%
  fromJSONstat() %>%
  as_tibble()
```

```{r}
ggplot(df_konsum, aes(x = Ã¥r, y = value)) +
  geom_col(color = "black", fill = "light blue") +
  scale_y_continuous(labels = scales::comma_format()) +
  labs(x = "Year", y = "Milliarder kroner", title = "Husholdningers konsum i Norge, 2015-2022")
```

Her kan vi se at forventet prisvekst og faktisk prisvekst traff hverandre noksÃ¥ bra, hvertfall med tanke pÃ¥ Ã¸kningen etter 2019, hvor prisen skjÃ¸t i vÃ¦ret.

PÃ¥ mellomlang sikt forventer alle i undersÃ¸kelsen en lavere prisstigning, men fortsatt prisstigning over tid.

Vi har valgt Ã¥ ta med en figur om konsumet til husholdningene denne perioden fordi vi mener dette kan vise om prisveksten har blitt lagt merke til. Det er tydelig at konsumet gikk ned etter 2019, men dette mÃ¥ ikke bare vÃ¦re prisvekst, men dette kan vÃ¦re pÃ¥ grunn av koronakrisen ogsÃ¥ som inntraff i 2020.

## Litteraturliste:

-Kilde 1: Data fra SSB. <https://www.ssb.no/statbank/table/03013/tableViewLayout1/>Â 

Kilde 2: Data fra Ipsos undersÃ¸kelse til Norges bank. <https://w.ipsos.no/bild/Forventningsundersokelse-for-Norges-Bank-1-kv-2002-til-1-kv-2023-Excel-CSV-160223.zip>Â Â Â Â 
